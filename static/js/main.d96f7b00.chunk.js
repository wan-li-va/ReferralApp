(this.webpackJsonpreferralapp=this.webpackJsonpreferralapp||[]).push([[0],{100:function(e,a,t){e.exports=t.p+"static/media/facebook.4022e4f6.ico"},101:function(e,a,t){e.exports=t.p+"static/media/twitter.7b1ddd91.svg"},102:function(e,a,t){},103:function(e,a,t){},106:function(e,a,t){e.exports=t.p+"static/media/environmentally-friendly.b4261a06.png"},107:function(e,a,t){e.exports=t.p+"static/media/amazon-fakes.3958eb6f.png"},108:function(e,a,t){},111:function(e,a,t){},113:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(13),c=t.n(l),s=t(9),i=t(11),o=t(24),u=r.a.createContext(null),m=function(e){return function(a){return r.a.createElement(u.Consumer,null,(function(t){return r.a.createElement(e,Object.assign({},a,{firebase:t}))}))}},d=u,f=t(66),b=t(52),h=t.n(b),p=(t(84),t(86),{apiKey:"AIzaSyDY3Mu4foJhoilBPwAsIBC3lQxCRaYr63k",authDomain:"referralapp-9c02a.firebaseapp.com",databaseURL:"https://referralapp-9c02a.firebaseio.com",projectId:"referralapp-9c02a",storageBucket:"referralapp-9c02a.appspot.com",messagingSenderId:"120981071250",appId:"1:120981071250:web:0f0cc797c9d2c8fe070d4b",measurementId:"G-2EH3FEJGEZ"}),E=function e(){var a=this;Object(f.a)(this,e),this.user=function(e){return a.db.ref("users/".concat(e))},this.users=function(){return a.db.ref("users")},this.reward=function(e){return a.db.ref("rewards/".concat(e))},this.rewards=function(){return a.db.ref("rewards")},this.admins=function(){return a.db.ref("admins")},h.a.initializeApp(p),this.db=h.a.database()},v=t(25),g=(t(90),function(e){var a=Object(n.useState)(!1),l=Object(s.a)(a,2),c=l[0],u=l[1];return Object(n.useEffect)((function(){!0===c&&u(!1)}),[c]),r.a.createElement("div",{className:"Header"},r.a.createElement("h1",{className:"Title"},r.a.createElement("img",{alt:"reshoe logo",className:"Logo",src:t(91)})),r.a.createElement("h1",{className:"SmallTitle"},r.a.createElement("img",{alt:"reshoe logo",className:"Logo",src:t(92)})),r.a.createElement(o.b,{className:"HeaderLink",to:"/about"},"About Us"),r.a.createElement(o.b,{className:"HeaderLink",to:"/faq"},"FAQ"),e.signedIn?r.a.createElement(o.b,{className:"HeaderLink",to:"/dashboard"},"Dashboard"):"",e.signedIn&&e.isAdmin?r.a.createElement(o.b,{className:"HeaderLink",to:"/admin"},"Admin Page"):"",e.signedIn?r.a.createElement(v.a,{style:{backgroundColor:"#FFE521"},variant:"warning",onClick:function(){u(!0),e.handleSignOut()}},"Sign Out"):r.a.createElement(v.a,{style:{backgroundColor:"#FFE521"},variant:"warning",onClick:function(){u(!0)}},"Sign In"),c?r.a.createElement(i.a,{to:"/"}):"")}),O=t(34),w=t(69),y=(t(97),function(e){var a=e.numReferrals,t=e.nextAchievement,n=a/t*100,l="info",c="";return n>=80?(l="success",c="Almost there! "):n<=20&&(l="danger"),r.a.createElement("div",{className:"ProgressBar"},r.a.createElement("div",{className:"labels"},r.a.createElement("p",{className:"left-label"},"0"),r.a.createElement("p",{className:"center-label"},c),r.a.createElement("p",{className:"right-label"},t)),r.a.createElement(w.a,{style:{height:"30px",width:"250px"},variant:l,now:n,srOnly:!0,label:a}))}),j=function(e){var a=e.code;return r.a.createElement("div",{className:"ReferralDisplay"},r.a.createElement("h1",{className:"Code"},a),r.a.createElement(v.a,{className:"copyButton",style:{backgroundColor:"#FFE521"},variant:"warning",onClick:function(){navigator.clipboard.writeText(a)}},"Copy Code"))},k=t(51),S=function(e){var a=e.rewards,t=e.userRewards,n=Object.keys(a),l=-1,c=Object.values(a).map((function(e){l++;var a,c=(a=n[l],t.includes(a)?"rgb(24, 184, 78, 0.9)":"rgb(232, 90, 85, 0.9)");return r.a.createElement(k.a,{style:{backgroundColor:c},className:"Card"},r.a.createElement("div",null,"You can ",e.name),r.a.createElement("div",null,"Complete ",e.numRequired," referrals to receive this reward!"),"#18B84E"===c&&r.a.createElement("div",null,"Reward Received!"))}));return r.a.createElement("div",{className:"Rewards"},r.a.createElement("h2",{className:"PossibleRewards"},"Possible Rewards"),r.a.createElement("div",{className:"rewardList"},c," "))},N=(t(98),function(e){var a=e.handleSocialShare;return r.a.createElement("div",{className:"Social"},r.a.createElement("div",{className:"share-label"},"Click to Share Your Referral!"),r.a.createElement("div",{className:"platform-grid"},r.a.createElement("a",{onClick:a,className:"instagram",target:"_blank",rel:"noopener noreferrer",href:"https://instagram.com"},r.a.createElement("img",{src:t(99),alt:"instagram.com"})),r.a.createElement("a",{onClick:a,className:"facebook",target:"_blank",rel:"noopener noreferrer",href:"https://facebook.com"},r.a.createElement("img",{src:t(100),alt:"facebook.com"})),r.a.createElement("a",{onClick:a,className:"twitter",target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com"},r.a.createElement("img",{src:t(101),alt:"twitter.com"}))))}),R=function(e){var a=e.rewards,t=e.nextAchievement,n=e.numReferrals;if(t){var l=t-n,c="referrals";return 1===l&&(c="referral"),r.a.createElement("div",{className:"nextReward"},"Just ",l," more ",c," until you can ",function(e,a){var t={name:"You have all the possible rewards"};return e.map((function(e){e.numRequired===a&&(t=e)})),t}(a,t).name,"!")}return r.a.createElement("div",null)},C=(t(102),m((function(e){var a=Object(n.useState)(24),t=Object(s.a)(a,2),l=t[0],c=t[1],i=Object(n.useState)(10),o=Object(s.a)(i,2),u=o[0],m=o[1],d=Object(n.useState)("CODE"),f=Object(s.a)(d,2),b=f[0],h=f[1],p=Object(n.useState)([]),E=Object(s.a)(p,2),v=E[0],g=E[1],w=Object(n.useState)({}),k=Object(s.a)(w,2),C=k[0],x=k[1],I=Object(n.useState)([]),A=Object(s.a)(I,2),H=A[0],P=A[1],q=Object(n.useState)(!1),L=Object(s.a)(q,2),U=L[0],F=L[1];Object(n.useEffect)((function(){var a=e.user;if(e.firebase.rewards().once("value").then((function(e){g(Object.values(e.val()).sort((function(e,a){return e.numRequired<a.numRequired?-1:e.numRequired>a.numRequired?1:0})))})),a){c(a.numReferrals),h(a.referralCode);var t=a.rewards.filter((function(e){return"dummy"!==e}));P(t),F(a.hasShared)}}),[e.user]),Object(n.useEffect)((function(){m(W())}),[e.user,v]),Object(n.useEffect)((function(){var a=e.user,t=e.firebase;a&&t.rewards().once("value").then((function(e){var n=e.val();x(n);for(var r=Object.values(n),c=Object.keys(n),s=0;s<r.length;s++)if(l===r[s].numRequired&&!a.rewards.includes(c[s])){t.user(a.id).update({rewards:[].concat(Object(O.a)(a.rewards),[c[s]])});break}}))}),[e.user,l]);var W=function(){var e=0;if(v.length>0)return v.map((function(a){return l>=a.numRequired&&e++,a})),e<v.length?v[e].numRequired:v[v.length-1].numRequired};return r.a.createElement("div",{className:"Dashboard"},r.a.createElement(S,{classname:"Rewards",rewards:C,userRewards:H}),r.a.createElement("div",{className:"displayMainPanel"},r.a.createElement("div",{className:"displayProgress"},r.a.createElement(y,{numReferrals:l,nextAchievement:u}),r.a.createElement(R,{className:"nextReward",numReferrals:l,nextAchievement:u,rewards:v})),r.a.createElement(j,{className:"ReferralDisplay",code:b}),r.a.createElement(N,{className:"Social",handleSocialShare:function(){if(!U){var a=e.firebase,t=e.user;a.user(t.id).update({numReferrals:t.numReferrals+1,hasShared:!0})}},referralCode:b,hasShared:U})))}))),x=t(57),I=t(56),A=t(18),H=(t(103),function(e){var a=Object(n.useRef)(null);return r.a.createElement("div",{className:"form-page"},r.a.createElement(A.a,{className:"form",onSubmit:function(a){return e.handleSubmit(a)}},r.a.createElement(A.a.Group,{controlId:"formEmail"},r.a.createElement(A.a.Label,null,"Enter your email address!"),r.a.createElement(A.a.Control,{type:"email",placeholder:"Enter email",defaultValue:e.email,className:"email-form"})),r.a.createElement(A.a.Group,{controlId:"formReferral"},r.a.createElement(A.a.Label,null,"Enter a referral code if applicable"),r.a.createElement(A.a.Control,{type:"text",placeholder:"Enter Referral Code",ref:a}),r.a.createElement(x.a,{target:a.current,show:e.show,placement:"top"},(function(e){return r.a.createElement(I.a,Object.assign({id:"overlay-error"},e),"Please put in a correct referral code")}))),r.a.createElement(v.a,{variant:"secondary",type:"submit"},"Submit!")))}),P=function(e){var a=Object(n.useRef)(null);return r.a.createElement("div",{className:"form-page"},r.a.createElement(A.a,{className:"form",onSubmit:function(a){return e.handleSubmit(a)}},r.a.createElement(A.a.Group,{controlId:"formEmail"},r.a.createElement(A.a.Label,null,"Enter your email address!"),r.a.createElement(A.a.Control,{className:"email-form",type:"email",placeholder:"Enter email"}),r.a.createElement(x.a,{target:a.current,show:e.show,placement:"top"},(function(e){return r.a.createElement(I.a,Object.assign({id:"overlay-error"},e),"Please put in an email!")}))),r.a.createElement(v.a,{variant:"secondary",type:"submit"},"Submit!")))},q=m((function(e){var a=Object(n.useState)(""),t=Object(s.a)(a,2),l=t[0],c=t[1],o=Object(n.useState)(!1),u=Object(s.a)(o,2),m=u[0],d=u[1],f=Object(n.useState)(!1),b=Object(s.a)(f,2),h=b[0],p=b[1],E=function(a){var t=e.firebase;a.preventDefault();var n=a.target.elements.formEmail.value;if(""!==n)if(p(!1),c(n),m){var r=a.target.elements.formReferral.value;g(n,r)}else t.users().once("value").then((function(e){var a=e.val(),t=[];for(var r in a)1!==r&&t.push(a[r]);var l=t.filter((function(e){return e.email===n}));l[0]?v(l[0].id):d(!0)}));else p(!0)},v=function(a){e.setUser(a)},g=function(a,t){var n=e.firebase;""!==t?n.users().once("value").then((function(e){var r=e.val(),l=[];for(var c in console.log(r),r)"1"!==c&&l.push(r[c]);console.log(l);var s=l.filter((function(e){return e.referralCode===t}));if(s[0]){var i=s[0].id;n.user(i).once("value").then((function(e){var a=e.val();n.user(i).update({numReferrals:a.numReferrals+1})})),p(!1),O(a,!1)}else p(!0)})):(p(!1),O(a,!1))},O=function(a,t){var n=e.firebase;if(!t){var r=n.users().push({email:a}).key,l={email:a,id:r,referralCode:r.substring(3),numReferrals:0,hasShared:!1,rewards:{0:"dummy"}};n.user(r).set(l),e.setUser(r)}};return r.a.createElement("div",{className:"Login"},e.signedIn?e.isAdmin?r.a.createElement(i.a,{to:"/admin"}):r.a.createElement(i.a,{to:"/dashboard"}):m?r.a.createElement(H,{show:h,email:l,handleSubmit:function(e){return E(e)}}):r.a.createElement(P,{handleSubmit:function(e){return E(e)}}))})),L=(t(61),function(){return r.a.createElement("div",{className:"page"},r.a.createElement("img",{alt:"environmentally friendly",className:"environment-img",src:t(106)}),r.a.createElement("h2",null,"Who is ReSHOE?"),r.a.createElement("h5",null,"We give people superpowers."),r.a.createElement("p",null,'Have you ever thought that it was possible to clean the earth as you walked? To help children in need with each step? To buy a new pair of shoes and tell people, "I take part in saving the planet. My shoes save the planet."'),r.a.createElement("h2",null,"Why ReSHOE?"),r.a.createElement("h5",null,"The environment is larger than our wallets."),r.a.createElement("p",null,"Here at ReSHOE, we care more about our values than our profits. We are willing to take a hit to our profits if it means our policies can further benefit the environment while satisfying our customers."),r.a.createElement("img",{alt:"shoes",className:"shoes",src:t(107),align:"left"}),r.a.createElement("h2",null,"What are the benefits of ReSHOE?"),r.a.createElement("h5",null,"We seek to provide the most comfortable, fitting, and flexible shoes to our consumers while improving the world, one shoe at a time. "),r.a.createElement("p",null,"For every pair of shoes purchased, ReSHOE will donate a pair to children without sneakers. Not only do you buy YOURSELF a brand new pair of shoes, a child in need will be overzealous when a brand, shiny new pair is delivered to them as well. "),r.a.createElement("p",null,"Every shoe is made of sustainable material. We do not hurt the environment in the production or development of our products."),r.a.createElement("p",null,"If you are satisfied with your product but it needs to be repaired, you can send it right back and we will repair them for you, free of charge. Consumer satisfaction is a top priority."),r.a.createElement("p",null,"When your shoes are worn out, they can be sent back to the company for 10% credit towards buying a new pair. You can happily browse for a new comfortable and sleek look for your feet knowing, rest assured, that your old pair will not end up in a landfill. All shoes sent back to us are recycled and reused, keeping with ReSHOE's values."))}),U=function(){return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"faq"},r.a.createElement("div",{className:"text"},r.a.createElement("h1",null,"FAQ"),r.a.createElement("h4",null,"Q: How do I get points?"),r.a.createElement("p",null,"A: One referral gets you one point, and sharing on social media also gets you one point."),r.a.createElement("h4",null,"Q: What counts as a referral?"),r.a.createElement("p",null,"A: When someone makes an account using your referral code."),r.a.createElement("h4",null,"Q: I shared on social media, why didn't I get a point?"),r.a.createElement("p",null,"A: You can only get a point from sharing on social media once, so once you've already shared you can't get anymore points."))))},F=t(31),W=t(21),Y=t(141),D=t(137),G=t(139),B=t(138),Q=t(68),T=t.n(Q),J=t(140),_=(t(62),t(108),function(e){var a=e.changeInputHandler,t=e.hasShared;return r.a.createElement("div",null,r.a.createElement("label",null,"Has shared on social"),r.a.createElement(J.a,{checked:t,inputProps:{"aria-label":"secondary checkbox"},onChange:function(e){return a(e,"hasShared")}}))}),z=function(e){var a=e.changeInputHandler,t=e.rewards,n=e.userRewards,l=-1,c=Object.keys(t);return r.a.createElement("div",null,r.a.createElement("label",null,"Rewards:"),Object.values(t).map((function(e){if("dummy"!==e){l++;var t=c[l];return r.a.createElement("div",null,r.a.createElement(J.a,{checked:n.includes(t),inputProps:{"aria-label":"secondary checkbox"},onChange:function(e){return function(e,t){var r=e.target.checked,l=Object(O.a)(n);r?n.includes(t)||l.push(t):n.includes(t)&&(l=l.filter((function(e){return e!==t}))),a(l,"rewards")}(e,t)}}),e.name)}})))},M=m((function(e){var a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=t[0],c=t[1],i=Object(n.useState)({}),o=Object(s.a)(i,2),u=o[0],m=o[1],d=Object(n.useState)(null),f=Object(s.a)(d,2),b=f[0],h=f[1],p=Object(n.useState)({}),E=Object(s.a)(p,2),v=E[0],g=E[1],w=Object(n.useState)(null),y=Object(s.a)(w,2),j=y[0],k=y[1];Object(n.useEffect)((function(){var a=e.user,t=e.admins;a&&(t[0]===a.id?c(!0):c(!1))}),[e.user]),Object(n.useEffect)((function(){e.firebase.users().on("value",(function(e){m(e.val())}))}),[]),Object(n.useEffect)((function(){e.firebase.rewards().once("value").then((function(e){k(e.val())}))}),[e]);var S=function(e,a){if("numReferrals"===a){var t=Number(e.target.value);g(Object(W.a)(Object(W.a)({},v),{},{numReferrals:Number(t)}))}if("hasShared"===a&&void 0!==e.target.checked&&null!==e.target.checked){var n=e.target.checked;g(Object(W.a)(Object(W.a)({},v),{},Object(F.a)({},a,n)))}else if(e.target){var r=e.target.value;g(Object(W.a)(Object(W.a)({},v),{},Object(F.a)({},a,r)))}else g(Object(W.a)(Object(W.a)({},v),{},{rewards:e}))};return r.a.createElement("div",{className:"page"},r.a.createElement("h2",{style:{textAlign:"center"}},"Admin Page"),"Permissions: ",l?"Global Admin":"General Admin",r.a.createElement("div",{style:{display:"flex",alignContent:"center",justifyContent:"center"}},r.a.createElement("div",{style:{flex:1,overflow:"scroll",maxHeight:"70vh"}},u&&Object.values(u).map((function(a){return r.a.createElement(Y.a,null,r.a.createElement(D.a,{expandIcon:r.a.createElement(T.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(B.a,{className:"heading"},a.email)),r.a.createElement(G.a,{className:"panel"},r.a.createElement(B.a,null,Object.keys(a).map((function(e){var t=e.charAt(0).toUpperCase()+e.slice(1),n=a[e];if("hasShared"===e)t="Has shared on social",n=a[e]?"yes":"no";else if("rewards"===e)return r.a.createElement("div",null,r.a.createElement("b",null,"Rewards: "),j&&a[e][1]?a[e].map((function(e){if("dummy"!==e&&j[e])return r.a.createElement("div",null,j[e].name)})):"none");if("id"!==e)return r.a.createElement("div",null,r.a.createElement("b",null,t,":")," ",n)})),r.a.createElement("div",null,r.a.createElement("b",null,"Permissions:")," ",e.admins.includes(a.id)?" Admin":" User"),r.a.createElement("button",{onClick:function(){return function(e){var a=e;h(a),g(u[a])}(a.id)}},"Edit User"))))}))),b&&r.a.createElement("div",{style:{flex:1,display:"flex",justifyContent:"center"}},r.a.createElement("div",null,b&&u&&Object.keys(v).map((function(e){return"numReferrals"===e&&"number","hasShared"===e?r.a.createElement(_,{hasShared:v[e],changeInputHandler:S}):"rewards"===e?r.a.createElement(z,{changeInputHandler:S,rewards:j,userRewards:v[e]}):"id"!==e?r.a.createElement("div",null,r.a.createElement("label",null,e),r.a.createElement("input",{type:"number",value:v[e],onChange:function(a){return S(a,e)}})):void 0})),r.a.createElement("div",{className:"buttons"},b&&r.a.createElement("button",{className:"option-button",onClick:function(){e.firebase.user(b).update(Object(W.a)(Object(W.a)({},v),{},{numReferrals:Number(v.numReferrals)}))}},"Save Edit"),r.a.createElement("button",{className:"option-button",style:{backgroundColor:"red"},onClick:function(){if(e.admins.includes(b)){if(!l)return console.log("Reached this point"),void alert("You do not have permission to delete another admin");if(b===e.admins[0])return void alert("You cannot delete the global admin.\nPlease contact the develpment team if you need to do this.");var a=e.admins.filter((function(e){return e!==b}));e.firebase.admins().set(a)}e.firebase.user(b).remove()}},"Delete User"),r.a.createElement("button",{className:"option-button",onClick:function(){h(null)}},"Clear Selected User"),l&&!e.admins.includes(b)&&r.a.createElement("button",{className:"option-button",onClick:function(){var a=[].concat(Object(O.a)(e.admins),[b]);e.firebase.admins().set(a)}},"Make General Admin"),l&&e.admins.includes(b)&&r.a.createElement("button",{className:"option-button",onClick:function(){var a=e.admins.filter((function(e){return b!==e}));e.firebase.admins().set(a)}},"Remove Admin Status"))))))})),K=(t(111),m((function(e){var a=e.firebase,t=Object(n.useState)("3"),l=Object(s.a)(t,2),c=l[0],u=l[1],m=Object(n.useState)(!1),d=Object(s.a)(m,2),f=d[0],b=d[1],h=Object(n.useState)(null),p=Object(s.a)(h,2),E=p[0],v=p[1],O=Object(n.useState)(!1),w=Object(s.a)(O,2),y=w[0],j=w[1],k=Object(n.useState)([]),S=Object(s.a)(k,2),N=S[0],R=S[1];Object(n.useEffect)((function(){if("3"!==c){a.users().on("child_changed",(function(e){c===e.val().id&&v(e.val())}));a.db.ref().on("child_changed",(function(e){"admins"===e.key&&R(e.val())})),a.admins().once("value").then((function(e){R(e.val())})),a.user(c).once("value").then((function(e){var a=e.val();v(a),b(!0)})),a.admins().once("value").then((function(e){e.val().includes(c)&&j(!0)}))}}),[c]);var x=function(e){u(e),b(!0)};return r.a.createElement(o.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(g,{signedIn:f,handleSignOut:function(){return u("3"),b(!1),v(null),j(!1),r.a.createElement(i.a,{to:"/"})},isAdmin:y}),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/about",component:L,exact:!0}),r.a.createElement(i.b,{path:"/faq",component:U,exact:!0}),f?y?r.a.createElement("div",null,r.a.createElement(i.b,{path:"/admin",exact:!0},r.a.createElement(M,{user:E,admins:N})),r.a.createElement(i.b,{path:"/dashboard"},r.a.createElement(C,{user:E})),r.a.createElement(i.b,{path:"/",exact:!0},r.a.createElement(q,{setUser:function(e){return x(e)},signedIn:f}))):r.a.createElement("div",null,r.a.createElement(i.b,{path:"/dashboard"},r.a.createElement(C,{user:E})),r.a.createElement(i.b,{path:"/",exact:!0},r.a.createElement(q,{setUser:function(e){return x(e)},signedIn:f})),r.a.createElement(i.a,{to:"/dashboard"})):r.a.createElement(i.b,{path:"/"},r.a.createElement(q,{setUser:function(e){return x(e)},signedIn:f})))))})));t(112);c.a.render(r.a.createElement(d.Provider,{value:new E},r.a.createElement(K,null)),document.getElementById("root"))},61:function(e,a,t){},76:function(e,a,t){e.exports=t(113)},90:function(e,a,t){},91:function(e,a,t){e.exports=t.p+"static/media/assembled.ecf2609b.png"},92:function(e,a,t){e.exports=t.p+"static/media/assembled-small.c951a50c.png"},97:function(e,a,t){},98:function(e,a,t){},99:function(e,a,t){e.exports=t.p+"static/media/instagram.7cea17bc.ico"}},[[76,1,2]]]);
//# sourceMappingURL=main.d96f7b00.chunk.js.map